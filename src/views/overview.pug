html
  head
    include header.pug
  body
      p Übersicht ihrer Klausuren:
      p(class='center')="Tipp des Tages: "+tip
          for object in exams
            if(object.archived == 0)
              div(class="card" style="width:18rem; margin:15px;")
                div(id="grabber")=object.id
                h5(class="card-header")=object.name
                  -var date = JSON.stringify(object.date).substring(1,11);
                  -var list = date.split("-");
                  -var newdate = list[2]+"-"+list[1]+"-"+list[0];
                  -object.date=date;
                ul(class="list-group list-group-flush")
                  li(class="list-group-item")=newdate
                  li(class="list-group-item" id="hours1")=object.total_hours
                  li(class="list-group-item" id="hours2")=object.spent_hours
                  li(class="list-group-item")="Ergebnis : "+object.status
                    br
                    a(href='/editpage/'+object.id) Editieren
                    br
                    a(href='/deletepage/'+object.id) Löschen
                    br
                    a(href='/archivepage/'+object.id) Archivieren
                    canvas(id=""+object.id width="100" height="100")
                    div(class="donut-inner")
                      h5=object.spent_hours + "h"
                      h4="von "+object.total_hours+"h"

                    script.
                      var id = document.getElementById("grabber").innerHTML;
                      var remove = document.getElementById("grabber");
                      remove.parentNode.removeChild(remove);
                      var hours1 = document.getElementById("hours1").innerHTML;
                      var removehours1 = document.getElementById("hours1");
                      removehours1.parentNode.removeChild(removehours1);
                      var hours2 = document.getElementById("hours2").innerHTML;
                      var removehours2 = document.getElementById("hours2");
                      removehours2.parentNode.removeChild(removehours2);
                      var ctx = document.getElementById(id);
                      var myChar = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                          labels: ['gearbeitet', 'verbleibend'],
                          datasets: [{
                            backgroundColor: ["#3e95cd", "#8e5ea2","#3cba9f","#e8c3b9","#c45850"],
                            data: [hours2,hours1-hours2],
                          }],

                      }});

      p
        form(action = "/addpage/"+id, method = "GET")
          button.btn.btn-primary.fixed(type='submit') Add Exam
        a.btn.btn-primary.fixed2(href='/') Logout
        a.btn.btn-primary.fixed3(href='../archiv/'+id) Archiv
